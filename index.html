<!DOCTYPE html>
<html>
<head>
<title>Acceleration Example</title>

<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8">

   // Wait for Cordova to load
   //
   document.addEventListener("deviceready", onDeviceReady, false);

   // Cordova is ready
   //
   var t;
   function onDeviceReady() {
      t = setInterval(runit,1000);
   }

   var loopcnt=0;
   function runit() {
      loopcnt++;
      navigator.accelerometer.getCurrentAcceleration(onSuccessAccel, onErrorAccel);
      if(loopcnt = 10) {
         navigator.geolocation.getCurrentPosition(onSuccessGPS, onErrorGPS,{enableHighAccuracy: true });
         loopcnt = 0;
      }
   }

   // onSuccess: Get a snapshot of the current acceleration
   //
   function onSuccessAccel(acceleration) {
      var element = document.getElementById('acceleration');
      element.innerHTML = 'Acceleration X: '          + acceleration.x                + '<br />' +
                          'Acceleration Y: '          + acceleration.y                + '<br />' +
                          'Acceleration Z: '          + acceleration.z                + '<br />' +
                          'Timestamp: '               + acceleration.timestamp        + '<br />';
   }

   // onError: Failed to get the acceleration
   //
   function onErrorAccel() {
      alert('code: '    + error.code    + '\n' +
            'message: ' + error.message + '\n');
   }

   function onSuccessGPS(position) {
      var element = document.getElementById('geolocation');
      element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                          'Longitude: '          + position.coords.longitude             + '<br />' +
                          'Altitude: '           + position.coords.altitude              + '<br />' +
                          'Accuracy: '           + position.coords.accuracy              + '<br />' +
                          'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                          'Heading: '            + position.coords.heading               + '<br />' +
                          'Speed: '              + position.coords.speed                 + '<br />' +
                          'Timestamp: '          + position.timestamp                    + '<br />';
   }

   // onError Callback receives a PositionError object
   //
   function onErrorGPS(error) {
   alert('code: '    + error.code    + '\n' +
         'message: ' + error.message + '\n');
   }

</script>
</head>
  <body>
    <h1>Example</h1>
    <p id="acceleration">getting acceleration...</p>
    <p id="geolocation">getting geolocation...</p>
  </body>
</html>

